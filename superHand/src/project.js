require=function a(c,o,r){function l(t,e){if(!o[t]){if(!c[t]){var s="function"==typeof require&&require;if(!e&&s)return s(t,!0);if(d)return d(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=o[t]={exports:{}};c[t][0].call(i.exports,function(e){return l(c[t][1][e]||e)},i,i.exports,a,c,o,r)}return o[t].exports}for(var d="function"==typeof require&&require,e=0;e<r.length;e++)l(r[e]);return l}({GameJsCfg:[function(e,t,s){"use strict";cc._RF.push(t,"34c3099fbtGLa1+t7AQ+mc3","GameJsCfg"),t.exports={stage_config_easy:{6:{"score percents":75,speed:750},5:{"score percents":60,speed:700},4:{"score percents":45,speed:650},3:{"score percents":30,speed:600},2:{"score percents":15,speed:550},1:{"score percents":0,speed:500}},stage_config_hard:{6:{"score percents":75,speed:1100},5:{"score percents":60,speed:1100},4:{"score percents":45,speed:1e3},3:{"score percents":30,speed:900},2:{"score percents":15,speed:800},1:{"score percents":0,speed:700}},stage_config_normal:{6:{"score percents":75,speed:1e3},5:{"score percents":60,speed:900},4:{"score percents":45,speed:800},3:{"score percents":30,speed:700},2:{"score percents":15,speed:600},1:{"score percents":0,speed:500}},endless_config:{6:{meter:50,speed:1100},5:{meter:40,speed:1100},4:{meter:30,speed:1e3},3:{meter:20,speed:900},2:{meter:10,speed:800},1:{meter:0,speed:700}}},cc._RF.pop()},{}],GameRankingList:[function(e,t,s){"use strict";cc._RF.push(t,"0cb25N3k9tO0JlwfA0mUggg","GameRankingList"),cc.Class({extends:cc.Component,properties:{rankingScrollView:cc.ScrollView,scrollViewContent:cc.Node,prefabRankItem:cc.Prefab,loadingLabel:cc.Node,rankList:cc.Node,nextFriend:cc.Node,_current_page:0,_total_page:0,_page_user_num:5,_user_data:[]},start:function(){var t=this;this.removeChild(),this.loadingLabel.active=!1,cc.sys.platform===cc.sys.WECHAT_GAME?wx.onMessage(function(e){console.log("接收主域发来消息：",e),0==e.messageType?(t.removeChild(),t.loadingLabel.active=!1):1==e.messageType?t.fetchFriendData(e.rankKey):3==e.messageType?t.submitScore(e.rankKey,e.score):5==e.messageType?t.fetchGroupFriendData(e.rankKey,e.shareTicket):7==e.messageType||(8==e.messageType?t.showNextPageUser():9==e.messageType?t.showLastPageUser():10==e.messageType&&t.showNextFriend(e.rankKey,e.score))}):this.fetchFriendData(data.rankKey)},showNextFriend:function(t,o){var s=this;this.nextFriend.active=!0;var r=this;wx.getUserInfo({openIdList:["selfOpenId"],success:function(e){s.loadingLabel.active=!1,console.log("success",e.data," score ",o);e.data[0];wx.getFriendCloudStorage({keyList:[t],success:function(e){var t=e.data;t.sort(function(e,t){return t.KVDataList[0].value=t.KVDataList[0].value||0,e.KVDataList[0].value=e.KVDataList[0].value||0,-(t.KVDataList[0].value-e.KVDataList[0].value)}),console.log("wx.getFriendCloudStorage success",e);for(var s=!1,n=0;n<t.length;n++){var i=parseInt(0!=t[n].KVDataList.length?t[n].KVDataList[0].value:0);if(o<i){s=!0,r.nextFriend.getChildByName("avatar").active=!0,r.nextFriend.getChildByName("frame").active=!0,r._createImage(r.nextFriend.getChildByName("avatar").getComponent(cc.Sprite),t[n].avatarUrl);var a=r.nextFriend.getChildByName("record").getComponent(cc.Label);a.string=i+"米",a.node.x=188;break}}if(!s){r.nextFriend.getChildByName("avatar").active=!1,r.nextFriend.getChildByName("frame").active=!1;var c=r.nextFriend.getChildByName("record").getComponent(cc.Label);c.string="无",c.node.x=122}}})}})},_createImage:function(s,e){cc.loader.load({url:e,type:"jpg"},function(e,t){s.spriteFrame=new cc.SpriteFrame(t)})},showNextPageUser:function(){if(this._current_page++,this._current_page>=this._total_page)this._current_page=this._total_page-1;else{var e=this._current_page*this._page_user_num,t=e+this._page_user_num;this._show_user_data(this._user_data,e,t)}},showLastPageUser:function(){if(this._current_page--,this._current_page<0)this._current_page=0;else{var e=this._current_page*this._page_user_num,t=e+this._page_user_num;this._show_user_data(this._user_data,e,t)}},submitScore:function(t,s){wx.getUserCloudStorage({keyList:[t],success:function(e){console.log("getUserCloudStorage success",e),0!=e.KVDataList.length&&e.KVDataList[0].value>=s||wx.setUserCloudStorage({KVDataList:[{key:t,value:s.toString()}],success:function(e){console.log("setUserCloudStorage success",e)},fail:function(e){console.log("setUserCloudStorage fail",e)},complete:function(e){console.log("setUserCloudStorage ok",e)}})}})},removeChild:function(){this.node.removeChildByTag(1e3),this.rankingScrollView.node.active=!1,this.scrollViewContent.removeAllChildren(),this.loadingLabel.string="玩命加载中...",this.loadingLabel.active=!0,this.nextFriend.active=!1},fetchFriendData:function(t){var a=this;this.removeChild(),this.rankingScrollView.node.active=!0,wx.getUserInfo({openIdList:["selfOpenId"],success:function(e){a.loadingLabel.active=!1,console.log("success",e.data);var i=e.data[0];wx.getFriendCloudStorage({keyList:[t],success:function(e){console.log("wx.getFriendCloudStorage success",e);var t=e.data;t.sort(function(e,t){return t.KVDataList[0].value=t.KVDataList[0].value||0,e.KVDataList[0].value=e.KVDataList[0].value||0,t.KVDataList[0].value-e.KVDataList[0].value}),a._user_data=t,a._total_page=Math.ceil(a._user_data.length/a._page_user_num),console.log("this._total_page",a._total_page);for(var s=0;s<t.length;s++)if(t[s].avatarUrl==i.avatarUrl){var n=cc.instantiate(a.prefabRankItem);n.getComponent("RankItem").init(s,t[s],!0),n.y=-296,a.node.addChild(n,1,1e3);break}a._show_user_data(a._user_data,0,a._page_user_num)}})}})},_show_user_data:function(e,t,s){if(!(t>=e.length||s<=t)){this.scrollViewContent.removeAllChildren();for(var n=t;n<s;n++){var i=e[n];if(i){var a=cc.instantiate(this.prefabRankItem);a.getComponent("RankItem").init(n,i),this.scrollViewContent.addChild(a)}}}},fetchGroupFriendData:function(t,s){var a=this;this.removeChild(),this.rankingScrollView.node.active=!0,wx.getUserInfo({openIdList:["selfOpenId"],success:function(e){console.log("success",e.data);var i=e.data[0];wx.getGroupCloudStorage({shareTicket:s,keyList:[t],success:function(e){console.log("wx.getGroupCloudStorage success",e),a.loadingLabel.active=!1;var t=e.data;t.sort(function(e,t){return t.KVDataList[0].value=t.KVDataList[0].value||0,e.KVDataList[0].value=e.KVDataList[0].value||0,t.KVDataList[0].value-e.KVDataList[0].value}),a._user_data=t,a._total_page=Math.ceil(a._user_data.length/a._page_user_num);for(var s=0;s<t.length;s++)if(t[s].avatarUrl==i.avatarUrl){var n=cc.instantiate(a.prefabRankItem);n.getComponent("RankItem").init(s,t[s],!0),n.y=-296,a.node.addChild(n,1,1e3);break}a._show_user_data(a._user_data,0,a._page_user_num)}})}})}}),cc._RF.pop()},{}],JPlatform:[function(e,t,s){"use strict";cc._RF.push(t,"b04c5Zi91dAXL00xAHIfixB","JPlatform");var c=cc.Class({properties:{jpsoundMgr:null,openId:null,platform:"",shareCb:null,ad:null,rankType:0,gameScene:null},onLoad:function(){},initXiaoMi:function(){this.platform="xiaomi",window.hy_dj_sdk.ready({zIndex:9999,pin:0},function(){var e=hy_dj_sdk.getBaseData();console.log(e)})},init:function(){this.initXiaoMi(),cc.sys.platform===cc.sys.WECHAT_GAME&&wx.login({success:function(e){wx.getUserInfo({success:function(e){console.log("getUserInfo success",e)}}),wx.getSetting({success:function(e){var t=e.authSetting;console.log("authSetting",t),t["scope.userInfo"]&&(permission[0]=!0),t["scope.userLocation"]&&(permission[1]=!0),t["scope.record"]&&(permission[2]=!0),t["scope.werun"]&&(permission[3]=!0),t["scope.writePhotosAlbum"]&&(permission[4]=!0)}})},fail:function(e){console.log(e)},complete:function(e){console.log(e)}}),cc.sys.platform===cc.sys.QQ_PLAY&&(this.openId=GameStatusInfo.openId)},addGameListener:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(cc.sys.platform===cc.sys.QQ_PLAY){if(null!==e){BK.MQQ.SsoRequest.addListener("sc.game_enter_background.local",this,e)}if(null!==t){BK.MQQ.SsoRequest.addListener("sc.game_enter_foreground.local",this,t)}}},init4399:function(){this.platform="4399"},gb4399Init:function(){this.platform="gb4399",gb4399.init({gameId:"31",dev:"1",success:function(){console.log("初始化成功"),gb4399.login({success:function(e){c.getInstance().jpsoundMgr.initBGMusic("resources/Sound/bgm_stage_mp3.mp3"),e.accessToken,e.uid,e.username,e.nick,e.avatar,e.accountType},fail:function(e){c.getInstance().jpsoundMgr.initBGMusic("resources/Sound/bgm_stage_mp3.mp3"),e.code,e.msg}})},fail:function(){console.log("初始化失败")}})},gb4399exit:function(){gb4399.exit(),gb4399.login({success:function(e){e.accessToken,e.uid,e.username,e.nick,e.avatar,e.accountType},fail:function(e){e.code,e.msg}})},oppoInit:function(){this.platform="OPPO"},JPSetLocalStorage:function(e,t){if(cc.sys.platform===cc.sys.QQ_PLAY){var s=this.openId;cc.sys.localStorage.setItem("qq_"+s+"_"+e,t)}else cc.sys.localStorage.setItem(e,t)},JPGetLocalStorage:function(e){if(cc.sys.platform===cc.sys.QQ_PLAY){var t=this.openId;return cc.sys.localStorage.getItem("qq_"+t+"_"+e)}return cc.sys.localStorage.getItem(e)},compareWeChatVersion:function(e,t){e=e.split("."),t=t.split(".");for(var s=Math.max(e.length,t.length);e.length<s;)e.push("0");for(;t.length<s;)t.push("0");for(var n=0;n<s;n++){var i=parseInt(e[n]),a=parseInt(t[n]);if(a<i)return 1;if(i<a)return-1}},login:function(){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.authorize({scope:"scope.userInfo",fail:function(e){(-1<e.errMsg.indexOf("auth deny")||-1<e.errMsg.indexOf("auth denied"))&&console.log("用户拒绝授权")}}),cc.sys.platform===cc.sys.QQ_PLAY||this.platform},getInfo:function(){cc.sys.platform===cc.sys.WECHAT_GAME?wx.getUserInfo({success:function(e){var t=e.userInfo;t.nickName,t.avatarUrl,t.gender,t.province,t.city,t.country}}):cc.sys.platform===cc.sys.QQ_PLAY&&BK.QQ.fetchOpenKey(function(e,t,s){0==e?c.getInstance().userInfo=s:c.getInstance().print("获取用户信息失败")}.bind(this))},showShareMenu:function(e,t){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;cc.sys.platform===cc.sys.WECHAT_GAME&&(wx.onShareAppMessage(s),-1===t.indexOf("http")?wx.showShareMenu({title:e,imageUrl:t}):wx.showShareMenu({title:e}))},share:function(e,t){2<arguments.length&&void 0!==arguments[2]&&arguments[2];var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"";5<arguments.length&&void 0!==arguments[5]&&arguments[5];if(cc.sys.platform===cc.sys.WECHAT_GAME)wx.onShareAppMessage(n),-1===t.indexOf("http")?wx.shareAppMessage({title:e,imageUrl:t}):wx.shareAppMessage({title:e});else if(cc.sys.platform===cc.sys.QQ_PLAY){var i={summary:e,picUrl:"",extendInfo:s,localPicPath:"",gameName:"抱紧大根"};BK.QQ.share(i,function(e,t,s){BK.Script.log(1,1,"joypac retCode:"+e+" shareDest:"+t+" isFirstShare:"+s),0==e?(null!==n&&n(),0==t?BK.Script.log(1,1,"joypac 成功分享至QQ"):1==t?BK.Script.log(1,1,"joypac 成功分享至空间"):2==t?BK.Script.log(1,1,"joypac 成功分享至微信"):3==t&&BK.Script.log(1,1,"joypac 成功分享至朋友圈")):1==e?BK.Script.log(1,1,"joypac 分享失败"+e):2==e&&BK.Script.log(1,1,"joypac 分享失败，用户取消分享："+e)}.bind(this))}else"gb4399"===this.platform&&gb4399.showShareMenu({shareTitle:"抱紧大根",shareContent:e,shareIcon:t,extra:"",success:function(){},fail:function(){}})},getAd:function(){return null===this.ad&&(this.ad=new n),this.ad},uploadRank:function(a,e,t,s){if(cc.sys.platform===cc.sys.WECHAT_GAME){var c={wxgame:{score:e+"",update_time:t},const_ms:s},o=[];o.push({key:"radishRecord",value:JSON.stringify(c)}),wx.getStorageInfo({success:function(e,t,s){for(var n=!1,i=0;i<e.length;i++)if(e[i]===a){console.log("存在本地存储"),wx.getStorage({key:a,success:function(e){wx.setUserCloudStorage({KVDataList:o,success:function(e){console.log("上传数据成功"),console.log(o),wx.setStorage({key:a,data:c,success:function(e){console.log("本地存储更新成功")},fail:function(e){console.log("本地存储更新失败")},complete:function(e){}})},fail:function(e){},complete:function(e){}})},fail:function(e){},complete:function(){}}),n=!0;break}!1===n&&wx.setUserCloudStorage({KVDataList:o,success:function(e){console.log(o),wx.setStorage({key:a,data:c,success:function(e){console.log("本地存储更新成功")},fail:function(e){console.log("本地存储更新失败")},complete:function(e){}})},fail:function(e){},complete:function(e){}})},fail:function(){},complete:function(){}})}else if(cc.sys.platform===cc.sys.QQ_PLAY){var n={userData:[{openId:GameStatusInfo.openId,startMs:t,endMs:(new Date).getTime().toString(),scoreInfo:{score:e}}],attr:{score:{type:"rank",order:1}}};BK.QQ.uploadScoreWithoutRoom(1,n,function(e,t,s){0!==e&&BK.Script.log(1,1,"上传分数失败!错误码："+e)})}else if("4399"===this.platform){window.h5api.submitScore(e,function(e){console.log("代码:"+e.code+",消息:"+e.message+",数据:"+e.data),1e4===e.code?console.log("上传成功"):console.log("上传失败")})}},getRank:function(e,n){if(cc.sys.platform===cc.sys.WECHAT_GAME)wx.getFriendCloudStorage({keyList:["radishRecord"],success:function(e){console.log("好友数据请求成功",e.data)},fail:function(){console.log("好友数据失败")},complete:function(){console.log("好友数据完成")}});else if(cc.sys.platform===cc.sys.QQ_PLAY){BK.QQ.getRankListWithoutRoom("score",1,0,function(e,t,s){0===e&&s&&n(s)}.bind(this))}},saveData:function(e){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.setStorage({key:"jpData",data:JSON.stringify(e),success:function(e){console.log("本地存储更新成功")},fail:function(e){console.log("本地存储更新失败")},complete:function(e){}}),cc.sys.platform===cc.sys.QQ_PLAY&&BK.QQ.saveGameData(e,function(e,t,s){BK.Script.log(1,1,"joypac"+JSON.stringify(e)),BK.Script.log(1,1,"joypac"+JSON.stringify(s))})},loadData:function(t){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.getStorage({key:"jpData",success:function(e){t(JSON.parse(e)),console.log("本地存储获取成功")},fail:function(e){console.log(JSON.stringify(e)),t(void 0),console.log("本地存储获取失败")},complete:function(e){}}),cc.sys.platform===cc.sys.QQ_PLAY&&BK.QQ.loadGameData(function(e,t,s){BK.Script.log(1,1,"joypac"+JSON.stringify(e)),BK.Script.log(1,1,"joypac"+JSON.stringify(s)),this.cb(s)}.bind(this))},saveDataToWeChatCloud:function(e){var t={wxgame:{score:e.radishId+"",update_time:Math.floor((new Date).getTime()/1e3)},const_ms:e.maxScore},s=[];s.push({key:"radishRecord",value:JSON.stringify(t)}),console.log(s),wx.setUserCloudStorage({KVDataList:s,success:function(e){console.log("上传数据成功")},fail:function(e){console.log("上传数据失败")},complete:function(e){console.log("接口调用结束，调用成功、失败都会执行")}})},showChildCmd:function(e){"showRank"==e&&wx.postMessage({message:"showRank"})},print:function(e){cc.sys.platform===cc.sys.WECHAT_GAME&&console.log("joypac"+e),cc.sys.platform===cc.sys.QQ_PLAY&&BK.Script.log(1,1,"joypac"+e)}}),n=function(){this.adOpen=cc.sys.platform===cc.sys.QQ_PLAY,this.isBannerAdOK=!1,this.isVedioAdOK=!1,this.bannerAd=null,this.rewardedVideoAd=null,this.adUnitId=0,this.onStart=null,this.onLoad=null,this.onClose=null,this.onError=null,this.isVedioEnded=!1,this.createBanner=function(){var n=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:10,s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:76,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:320,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:100;cc.sys.platform===cc.sys.WECHAT_GAME?0!==this.adUnitId?(this.bannerAd=wx.createBannerAd({adUnitId:this.adUnitId,style:{left:t,top:s,width:i,height:a}}),this.bannerAd.onLoad(function(){void 0===this.bannerAd&&null===this.bannerAd||(this.isBannerAdOK=!0,null!==e&&"function"===typeOf(e)&&e())}.bind(this))):this.isBannerAdOK=!1:cc.sys.platform===cc.sys.QQ_PLAY?BK.Advertisement.fetchBannerAd(function(e,t,s){0==e?(this.isBannerAdOK=!0,this.bannerAd=s,BK.Script.log(1,1,"joypac 获取到了 广告:"+this.bannerAd),this.bannerAd.onClickContent(function(){BK.Script.log(1,1,"joypac 点击了广告 msg:"+t)}),this.bannerAd.onClickClose(function(){BK.Script.log(1,1,"joypac 关闭了广告 msg:"+t)}),n&&this.bannerAd.show(function(e,t,s){0==e||BK.Script.log(1,1,"展示失败 msg:"+t)}.bind(this))):null!==this.bannerAd?this.isBannerAdOK=!0:this.isBannerAdOK=!1}.bind(this)):"OPPO"===c.getInstance().platform&&(this.bannerAd.onLoad(function(e){console.log("Banner 加载成功")}),this.bannerAd.onError(function(e){console.log(e)}),this.bannerAd=opUnion.createBannerAd({containerId:"xxxx",posId:"xxxx",mediaId:"xxxx",geo:{lat:12.52111,lon:-69.968338,timestamp:1536307959718}}))},this.createVideo=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,s=this,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;if(this.vedioSetCallBack(e,t,n,i),cc.sys.platform===cc.sys.WECHAT_GAME){if(console.log(this.isCanShowVideo()),!this.isCanShowVideo())return;0!==this.adUnitId&&(this.rewardedVideoAd.onError(function(e){s.onError(e)}),this.rewardedVideoAd.onLoad(function(){s.isVedioAdOK=!0,s.onLoad()}),this.rewardedVideoAd=wx.createRewardedVideoAd({adUnitId:this.adUnitId}))}else if(cc.sys.platform===cc.sys.QQ_PLAY){BK.Advertisement.fetchVideoAd(0,function(e,t,s){0==e?(this.isVedioAdOK=!0,this.rewardedVideoAd=s,null!==this.onLoad&&this.onLoad()):(this.isVedioAdOK=!1,null!==this.onError&&this.onError(e))}.bind(this))}else"4399"===this.platform&&window.h5api.canPlayAd()&&(this.isVedioAdOK=ture,this.onLoad()),"gb4399"===this.platform&&(this.isVedioAdOK=!1,this.onError(0))},this.isCanShowVideo=function(){var e=!1;if(cc.sys.platform===cc.sys.WECHAT_GAME){var t=wx.getSystemInfoSync().SDKVersion;-1===this.compareWeChatVersion(t,"2.0.4")?console.log("--\x3e版本过低，视频不支持"):e=!0}return e},this.showBanner=function(){if(null!==this.bannerAd)if(cc.sys.platform===cc.sys.WECHAT_GAME){var e=wx.getSystemInfoSync();console.log(e);var t=e.screenWidth/2,s=e.screenHeight;this.bannerAd.style.left=t-this.bannerAd.style.realWidth/2,this.bannerAd.style.top=s-this.bannerAd.style.realHeight,this.bannerAd.show()}else if(cc.sys.platform===cc.sys.QQ_PLAY){if(null===this.bannerAd)return this.createBanner(!0),void BK.Script.log(1,1,"joypacbanner广告为空 创建banner");this.bannerAd.show(function(e,t,s){0==e||BK.Script.log(1,1,"展示失败 msg:"+t)}.bind(this))}},this.hideBanner=function(){null!==this.bannerAd&&(cc.sys.platform===cc.sys.WECHAT_GAME?this.bannerAd.hide():cc.sys.platform===cc.sys.QQ_PLAY&&(this.bannerAd.close(),this.bannerAd=null,this.isBannerAdOK=!1,this.createBanner()))},this.destroyBanner=function(){null!==this.bannerAd&&(cc.sys.platform===cc.sys.WECHAT_GAME?this.bannerAd.destroy():cc.sys.platform===cc.sys.QQ_PLAY&&this.bannerAd.close())},this.vedioPlay=function(t,s){if(this.vedioSetCallBack(null,t,s,null),cc.sys.platform===cc.sys.WECHAT_GAME)this.RewardedVideoAd.onClose(this.onClose),this.rewardedVideoAd.show().then(function(){return t()});else if(cc.sys.platform===cc.sys.QQ_PLAY)this.rewardedVideoAd.jump();else if("4399"===this.platform){window.h5api.playAd(function(e){console.log("代码:"+e.code+",消息:"+e.message),1e4===e.code?(t(),console.log("开始播放")):10001===e.code?(s(!0),console.log("播放结束")):(s(!1),console.log("广告异常"))})}},this.vedioSetCallBack=function(e,t,s,n){this.onLoad=null===e?this.onLoad:e,this.onStart=null===t?this.onStart:t,this.onClose=null===s?this.onClose:s,this.onError=null===n?this.onError:n,null!==this.rewardedVideoAd&&(cc.sys.platform===cc.sys.WECHAT_GAME?(this.RewardedVideoAd.onLoad(this.onLoad),this.RewardedVideoAd.onClose(this.onClose),this.RewardedVideoAd.onError(this.onError)):cc.sys.platform===cc.sys.QQ_PLAY&&this.rewardedVideoAd.setEventCallack(function(e,t){}.bind(this),function(e,t){0===e&&(BK.Script.log(1,1,"joypac广告视频播放完成.code:"+e+" msg"+t),this.isVedioEnded=!0)}.bind(this),function(e,t){BK.Script.log(1,1,"joypac关闭广告.code:"+e+" msg"+t),null!==this.onClose&&this.onClose(this.isVedioEnded)}.bind(this),function(e,t){BK.Script.log(1,1,"joypac广告视频开始播放.code:"+e+" msg"+t),this.isVedioEnded=!1,null!==this.onStart&&this.onStart()}.bind(this)))}};c._instance=null,c.getInstance=function(){return c._instance||(c._instance=new c,c._instance.init()),c._instance},t.exports=c,cc._RF.pop()},{}],RankItem:[function(e,t,s){"use strict";cc._RF.push(t,"e169162PKBHZ5bfwXGW8A8H","RankItem");e("JPlatform");cc.Class({extends:cc.Component,name:"RankItem",properties:{backSprite:cc.Node,rankLabel:cc.Label,rankSprite:cc.Sprite,avatarImgSprite:cc.Sprite,nickLabel:cc.Label,topScoreLabel:cc.Label},start:function(){},init:function(e,t,s){var n=t.url,i=t.nick,a=t.score;this.rankLabel.string=(e+1).toString(),this.createImage(n),this.nickLabel.string=i,this.topScoreLabel.string=a.toString()+"m"},createImage:function(e){var s=this;cc.loader.load({url:e,type:"jpg"},function(e,t){s.avatarImgSprite.spriteFrame=new cc.SpriteFrame(t)})}}),cc._RF.pop()},{JPlatform:"JPlatform"}],RankingListView:[function(e,t,s){"use strict";cc._RF.push(t,"41a06HDODRDJYVEuerVnWJv","RankingListView");e("wxsdk");cc.Class({extends:cc.Component,properties:{backButton:cc.Node,shareButton:cc.Node,rankingScrollView:cc.Sprite},onLoad:function(){this.tex=new cc.Texture2D;var e=wx.getOpenDataContext().canvas;e.width=640,e.height=1136},onNextPageClick:function(){cc.soundManager.playSound("SE_Enter"),wx.postMessage({messageType:8,rankKey:"rankkey"})},onLastPageClick:function(){cc.soundManager.playSound("SE_Enter"),wx.postMessage({messageType:9,rankKey:"rankkey"})},onBackBtnClick:function(e,t){cc.soundManager.playSound("SE_Enter"),wx.postMessage({messageType:0,rankKey:"rankkey"}),this.node.destroy()},_updateSubDomainCanvas:function(){if(this.tex){var e=wx.getOpenDataContext().canvas;this.tex.initWithElement(e),this.tex.handleLoadedTexture(),this.rankingScrollView.spriteFrame=new cc.SpriteFrame(this.tex)}},update:function(){this._updateSubDomainCanvas()}}),cc._RF.pop()},{wxsdk:"wxsdk"}],difficultySelect:[function(e,t,s){"use strict";cc._RF.push(t,"13138dQBS9EM5WKqsjOV76V","difficultySelect"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.superHand.gameState=cc.GameState.DifficultySelect,cc.soundManager.playMusic("BGM_Title");for(var e=["easy","normal","hard"],t=0;t<e.length;t++){var s=this.node.getChildByName(e[t]);if(s){var n=s.getChildByName("progress"),i=s.getChildByName("tag"),a=cc.superHand.stageScore[e[t]].bestScore;n.active=0!=a,i.active=100==a,n.getComponent(cc.Label).string=a+"%"}}},start:function(){},onDifficultySelectBtnClick:function(e,t){cc.soundManager.playSound("SE_Enter"),"easy"===t?cc.superHand.difficulty=cc.Difficulty.Easy:"normal"==t?cc.superHand.difficulty=cc.Difficulty.Normal:"hard"==t&&(cc.superHand.difficulty=cc.Difficulty.Hard),cc.superHand.transitionTo("game",.8,function(e,t){var s=t.getChildByName("Canvas").getChildByName("help");s.setLocalZOrder(10),s.active=!0})},onCancelBtnClick:function(e,t){cc.soundManager.playSound("SE_Enter"),cc.superHand.transitionTo("modeSelect",.8)}}),cc._RF.pop()},{}],game:[function(e,t,s){"use strict";cc._RF.push(t,"b9611DDG0lMqK2ge40XHEUy","game");var n=e("wxsdk"),o=e("JPlatform");cc.Class({extends:cc.Component,properties:{bg_scrow_speed:0,player_pre:cc.Prefab,gameover_pre:cc.Prefab,pause:cc.Node,_score:0,_diePoints:[],frame_text:cc.Label,_progressBar:null,_progressLabel:null,_distance:0,_overPopup:null,_currentTileMap:null,_currentTileLayer:null,camera:cc.Node,nextFriend:cc.Node,head:cc.Sprite,record:cc.Label,ad:null,canRevive:!0,vedioReady:!1,startTime:0,relifeBtn:cc.Node,shareRelifeBtn:cc.Node,adBtn:cc.Node,_t_sum:0,_frame_sum:0,_last_time:0},initTop:function(){var e=void 0;cc.superHand.mode===cc.Mode.Stage?(e=cc.find("Canvas/top/stage/progressBar"),this._progressBar=e.getComponent(cc.ProgressBar),this._progressBar.progress=0):cc.superHand.mode===cc.Mode.Endless&&(e=cc.find("Canvas/top/endless/progressBar")),e.active=!0,this._progressLabel=e.getChildByName("progressLabel").getComponent(cc.Label),this._progressLabel.string="0"},initPlayer:function(){this.player_left=this.node.getChildByName("player_left"),this.player_right=this.node.getChildByName("player_right"),this.ball_offset=this.player_left.getChildByName("ball").y,this.player_left=this.node.getChildByName("player_left"),this.player_right=this.node.getChildByName("player_right")},initCollisionLine:function(){this.player_left.y+this.ball_offset>this.tilemap.node.y&&this.player_left.y+this.ball_offset<=this.tilemap.node.y+this.tilemap.node.height&&(this._currentTileMap=this.tilemap,this._currentTileLayer=this.tilelayer),this.player_left.y+this.ball_offset>this.tilemap.node.y+this.tilemap.node.height&&this.player_left.y+this.ball_offset<=this.tilemap2.node.y+this.tilemap2.node.height&&(this._currentTileMap=this.tilemap2,this._currentTileLayer=this.tilelayer2);var e=this.player_left.getComponent("player").getPointsOfBall().left.y;this.collision_line_point=[];for(var t=0,s=0;t<4;t++,s+=160)this.collision_line_point.push(cc.p(s,e));this._stage_pregress=0,this.passStone=!0},_getMapUrl:function(e,t){return"map/stage_"+e+"_"+t},_getRandomMapUrl:function(){var e=["easy","normal","hard"],t=Math.floor(3*Math.random()),s=Math.floor(3*Math.random()+1);return console.log("map/stage_"+e[t]+"_"+s),"map/stage_"+e[t]+"_"+s},initMap:function(){var e=cc.superHand.difficulty===cc.Difficulty.Easy?"easy":cc.superHand.difficulty===cc.Difficulty.Normal?"normal":"hard";if(this.bg1=this.node.getChildByName("main_back1"),this.bg2=this.node.getChildByName("main_back2"),this.bg1.getComponent(cc.Sprite).spriteFrame.getTexture().setAliasTexParameters(),this.bg2.getComponent(cc.Sprite).spriteFrame.getTexture().setAliasTexParameters(),this.bgHeight=this.bg1.height,this.gids=[0,1,2,3,4,8,9,24,25,26,27,28,7,8,16,33,34,41,49,52,57,60],this.stoneGID=[[1,2,3,4,9,10,11,12,17,18,19,20,25,26,27,28],[5,6,7,8,13,14,15,16,21,22,23,24,29,30,31,32],[33,34,35,36,41,42,43,44,49,50,51,52,57,58,59,60]],cc.superHand.mode===cc.Mode.Stage){this.bg_scrow_speed=cc.superHand.difficulty===cc.Difficulty.Easy?500:cc.superHand.difficulty===cc.Difficulty.Normal?500:700,this.tilemap=this.node.getChildByName("tilemap").getComponent("cc.TiledMap"),this.tilemap.tmxAsset=cc.loader.getRes(this._getMapUrl(e,1)),this.tilelayer=this.tilemap.getLayer("Tile Layer 1");var t=this.node.getChildByName("tilemap2");t.active=!0,this.tilemap2=t.getComponent("cc.TiledMap"),this.tilemap2.tmxAsset=cc.loader.getRes(this._getMapUrl(e,2)),this.tilelayer2=this.tilemap2.getLayer("Tile Layer 1"),this.tilelayer.node.getChildByName("endline").active=!1,this.tilelayer2.node.getChildByName("endline").active=!0,this.tilemap_total_height=this.tilemap2.node.getPositionY()+this.tilemap2.node.height-this.tilemap.node.getPositionY();var s=this.tilemap.node.getPositionY();this._iphonex_offset=this.node.height/2-s,this.tilemap2.node.setPositionY(this.tilemap2.node.getPositionY()+this._iphonex_offset),this.tilemap.node.setPositionY(this.tilemap.node.getPositionY()+this._iphonex_offset);var n=cc.superHand.stageScore[e].bestScore;if(0!=n&&100!=n){var i=void 0,a=void 0;n<=50?(i=this.tilelayer.node.getChildByName("bestline"),a=this.tilemap_total_height/2*n/50):(i=this.tilelayer2.node.getChildByName("bestline"),a=this.tilemap_total_height/2*(n-50)/50),i.active=!0,i.setPositionY(a)}}else if(cc.superHand.mode===cc.Mode.Endless){this.bg_scrow_speed=700,this.tilemap=this.node.getChildByName("tilemap").getComponent("cc.TiledMap"),this.tilemap.tmxAsset=cc.loader.getRes(this._getRandomMapUrl()),this.tilelayer=this.tilemap.getLayer("Tile Layer 1"),this.tilelayer.node.getChildByName("endline").active=!1;var c=this.node.getChildByName("tilemap2");c.active=!0,this.tilemap2=c.getComponent("cc.TiledMap"),this.tilemap2.tmxAsset=cc.loader.getRes(this._getRandomMapUrl()),this.tilelayer2=this.tilemap2.getLayer("Tile Layer 1");var o=cc.superHand.endlessScore.bestScore;if(this.tilemap_num=Math.floor(300*o/this.tilemap.node.height),this.current_tilemap_num=0,this.show_bestline=!1,this.current_tilemap_num==this.tilemap_num&&0!=o&&100!=o){var r=this.tilelayer.node.getChildByName("bestline");r.active=!0,r.setPositionY(300*cc.superHand.endlessScore.bestScore),this.show_bestline=!0}}this._currentTileMap=this.tilemap,this._currentTileLayer=this.tilelayer},updateMap:function(e){if(this.bg1.setPositionY(this.bg1.getPositionY()-this.bg_scrow_speed*e),this.bg2.setPositionY(this.bg2.getPositionY()-this.bg_scrow_speed*e),this.camera.y+=this.bg_scrow_speed*e,this.player_left.y+=this.bg_scrow_speed*e,this.player_right.y+=this.bg_scrow_speed*e,this.bg1.getPositionY()<=-this.bgHeight/2-this.node.height/2&&this.bg1.setPositionY(this.bg2.getPositionY()+this.bgHeight),this.bg2.getPositionY()<=-this.bgHeight/2-this.node.height/2&&this.bg2.setPositionY(this.bg1.getPositionY()+this.bgHeight),cc.superHand.mode===cc.Mode.Endless&&(this.player_left.y>this.tilemap.node.y+this.tilemap.node.height-this.node.height/2&&(this.tilemap.node.setPositionY(this.tilemap2.node.getPositionY()+this.tilemap2.node.height),this.tilemap.tmxAsset=cc.loader.getRes(this._getRandomMapUrl()),this.tilelayer.node.getChildByName("bestline").active=!1,this.current_tilemap_num++),this.player_left.y>this.tilemap2.node.y+this.tilemap2.node.height-this.node.height/2&&(this.tilemap2.node.setPositionY(this.tilemap.node.getPositionY()+this.tilemap.node.height),this.tilemap2.tmxAsset=cc.loader.getRes(this._getRandomMapUrl()),this.tilelayer2.node.getChildByName("bestline").active=!1,this.current_tilemap_num++),!this.show_bestline&&cc.superHand.endlessScore.bestScore&&this.current_tilemap_num+1==this.tilemap_num&&this.player_left.y>=this.tilemap2.node.y-this.tilemap.node.height/2)){var t=this.tilelayer2.node.getChildByName("bestline");t.active=!0,t.setPositionY(300*cc.superHand.endlessScore.bestScore%this.tilelayer2.node.height),this.show_bestline=!0}if(this._distance+=this.bg_scrow_speed*e,this.updateScore(this._distance),cc.superHand.mode===cc.Mode.Stage&&this.player_left.y>=this.tilemap2.node.y+this.tilemap2.node.height+this._iphonex_offset)return cc.soundManager.stopMusic("BGM_InGame"),cc.soundManager.playSound("SE_Clear"),void this.gameover(!0)},updateScore:function(e){if(cc.superHand.mode===cc.Mode.Stage){var t=this.node.height/2;if(e<=t)return;e-=t;var s=Math.abs(e/this.tilemap_total_height);s=Math.max(0,Math.min(1,s)),this._progressLabel.string=Math.floor(100*s).toString(),this._progressBar&&(this._progressBar.progress=s),this.updateStageScrollSpeed(Math.floor(100*s))}else if(cc.superHand.mode===cc.Mode.Endless){var n=this.node.height/2;if(e<=n)return;e-=n;var i=parseInt(this._progressLabel.string);i=Math.floor(e/300),this._progressLabel.string=i.toString(),this.updateEndlessScrollSpeed(i)}},updateStageScrollSpeed:function(e){var t=cc.superHand.difficulty===cc.Difficulty.Easy?"easy":cc.superHand.difficulty===cc.Difficulty.Normal?"normal":"hard",s=cc.stage_config["stage_config_"+t];for(var n in s)if(s[n]["score percents"]==e){this.bg_scrow_speed=s[n].speed;break}},updateEndlessScrollSpeed:function(e){var t=cc.stage_config.endless_config;for(var s in t)if(t[s].meter==e){this.bg_scrow_speed=t[s].speed;break}},collision:function(){this.player_left.y>this.tilemap.node.y&&this.player_left.y<=this.tilemap.node.y+this.tilemap.node.height?(this._currentTileMap=this.tilemap,this._currentTileLayer=this.tilelayer):this.player_left.y>this.tilemap2.node.y&&this.player_left.y<=this.tilemap2.node.y+this.tilemap2.node.height&&(this._currentTileMap=this.tilemap2,this._currentTileLayer=this.tilelayer2);var e=!1,t=!1;this._diePoints=[];var s=this.player_left.getComponent("player").getPointsOfBall();for(var n in s){var i=this.tileCoordForPosition(this._currentTileMap.node.convertToNodeSpace(s[n]));if(!(i.y<0||i.x<0||i.y>=this._currentTileMap.getMapSize().height||i.x>=this._currentTileMap.getMapSize().width)){for(var a=this._currentTileLayer.getTileGIDAt(i),c=!0,o=0;o<this.gids.length;o++)a==this.gids[o]&&(c=!1);if(c){e=!0,this.player_left.emit("gameover","Die"),this._diePoints.push(i);break}}}var r=this.player_right.getComponent("player").getPointsOfBall();for(var l in r){var d=this.tileCoordForPosition(this._currentTileMap.node.convertToNodeSpace(r[l]));if(!(d.y<0||d.x<0||d.y>=this._currentTileMap.getMapSize().height||d.x>=this._currentTileMap.getMapSize().width)){for(var h=this._currentTileLayer.getTileGIDAt(d),u=!0,g=0;g<this.gids.length;g++)h==this.gids[g]&&(u=!1);if(u){t=!0,this.player_right.emit("gameover","Die"),this._diePoints.push(d);break}}}(e||t)&&this.gameover(),e&&!t&&this.player_right.emit("gameover","HalfDie"),!e&&t&&this.player_left.emit("gameover","HalfDie")},gameover:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(cc.superHand.gameState!=cc.GameState.Over){if(cc.superHand.gameState=cc.GameState.Over,e){var t=cc.superHand.difficulty===cc.Difficulty.Easy?"easy":cc.superHand.difficulty===cc.Difficulty.Normal?"normal":"hard";return GameAnalytics("addProgressionEvent","Complete","stage",t),this.saveGameData(),void cc.director.loadScene("over")}if(cc.superHand.mode===cc.Mode.Endless&&n.showNextFriend("rankkey",parseInt(this._progressLabel.string)),"gb4399"===o.getInstance().platform)return this.saveGameData(),void cc.director.loadScene("over");if("xiaomi"===o.getInstance().platform)return this.saveGameData(),void cc.director.loadScene("over");if(cc.sys.platform===cc.sys.QQ_PLAY&&(o.getInstance().getAd().isVedioAdOK?(this.relifeBtn.active=!0,this.shareRelifeBtn.active=!1):(this.shareRelifeBtn.active=!0,this.relifeBtn.active=!1)),"OPPO"===o.getInstance().platform&&(o.getInstance().getAd().isInterstitialAdOK?(this.relifeBtn.active=!1,this.shareRelifeBtn.active=!1,this.adBtn.active=!0):(this.saveGameData(),cc.director.loadScene("over"))),cc.sys.platform===cc.sys.QQ_PLAY&&cc.superHand.mode===cc.Mode.Endless){BK.QQ.getRankListWithoutRoom("score",1,0,function(e,t,s){var n=this;if(0===e){if(s){var i=void 0;i=1<s.data.ranking_list.length?s.data.ranking_list.sort(function(e,t){return void 0===e.score||null===e.score?1:void 0===t.score||null===t.score?-1:e.score<=t.score?1:-1}):s.data.ranking_list;for(var a=0;a<i.length;a++)if(1==i[a].selfFlag){if(0===a)break;this.nextFriend.active=!0,this.record.string=i[a-1].score.toString()+"米";var c=i[a-1].url;o.getInstance().print(JSON.stringify(i[a-1])),cc.loader.load({url:c,type:"jpg"},function(e,t){n.head.spriteFrame=new cc.SpriteFrame(t)});break}}}else null!=this&&null!=this.loadingLabel&&(this.loadingLabel.active=!1)}.bind(this))}setTimeout(function(){this._overPopup=this.node.getChildByName("over"),this._overPopup.active=!0,this._overPopup.setLocalZOrder(11);var e="";cc.superHand.mode===cc.Mode.Stage?e="%":cc.superHand.mode===cc.Mode.Endless&&(e="米"),this._overPopup.getChildByName("score").getComponent(cc.Label).string=this._progressLabel.string+e}.bind(this),1800)}},saveGameData:function(){var e=parseInt(this._progressLabel.string),t=cc.superHand.difficulty===cc.Difficulty.Easy?"easy":cc.superHand.difficulty===cc.Difficulty.Normal?"normal":"hard";if(cc.superHand.mode===cc.Mode.Stage)JSON.parse(cc.sys.localStorage.getItem("stageScore"))[t].bestScore<e&&(cc.superHand.stageScore[t].bestScore=e),cc.superHand.stageScore[t].currentScore=e,cc.sys.localStorage.setItem("stageScore",JSON.stringify(cc.superHand.stageScore));else if(cc.superHand.mode===cc.Mode.Endless){var s=JSON.parse(cc.sys.localStorage.getItem("endlessScore")).bestScore;s<e&&(cc.sys.platform===cc.sys.QQ_PLAY?(this.startTime=(new Date).getTime().toString(),o.getInstance().uploadRank("score",s,this.startTime,"")):n.submitScore("rankkey",e),cc.superHand.endlessScore.bestScore=e),cc.superHand.endlessScore.currentScore=e,cc.sys.localStorage.setItem("endlessScore",JSON.stringify(cc.superHand.endlessScore))}},tileCoordForPosition:function(e){var t=this.tilemap.getTileSize(),s=this.tilemap.getMapSize(),n=Math.floor(e.x/t.width),i=Math.floor((s.height*t.height-e.y)/t.height);return cc.p(n,i)},destroyHelpView:function(e,t){cc.superHand.gameState=cc.GameState.Gaming,cc.find("Canvas/help").active=!1},onPauseBtnClick:function(){cc.soundManager.playSound("SE_Enter"),cc.superHand.gameState==cc.GameState.Gaming&&(cc.superHand.gameState=cc.GameState.GamePause,this.pause.setLocalZOrder(10),this.pause.active=!0,this.player_left.emit("gamepause"),this.player_right.emit("gamepause"),this.player_right.parent=this.node)},onResumeBtnClick:function(){cc.soundManager.playSound("SE_Enter"),this.pause.active=!1,cc.superHand.gameState=cc.GameState.Gaming,this.player_left.emit("gameresume"),this.player_right.emit("gameresume")},onReturnMenuBtnClick:function(){cc.soundManager.playSound("SE_Enter"),cc.superHand.transitionTo("menu",.8)},onCancelBtnClick:function(){if(cc.superHand.mode===cc.Mode.Endless)GameAnalytics("addProgressionEvent","Fail","endless","","",parseInt(this._progressLabel.string));else{var e=cc.superHand.difficulty===cc.Difficulty.Easy?"easy":cc.superHand.difficulty===cc.Difficulty.Normal?"normal":"hard";GameAnalytics("addProgressionEvent","Fail","stage",e,"",parseInt(this._progressLabel.string))}cc.soundManager.playSound("SE_Enter"),this.saveGameData(),this.scheduleOnce(function(){n.removeOpenDataTexture(),cc.director.loadScene("over")},1)},onAdBtnClick:function(){cc.soundManager.playSound("SE_Enter"),o.getInstance().getAd().interstitialAd.onClose(function(){this._onRelifeBtnClick(),cc.soundManager.playMusic("BGM_InGame"),o.getInstance().getAd().isInterstitialAdOK=!1,o.getInstance().getAd().interstitialAd.load(),console.log("插屏广告关闭")}.bind(this)),o.getInstance().getAd().interstitialAd.show().catch(function(e){interstitialAd.load().then(function(){interstitialAd.show()})})},onShareRelifeBtnClick:function(){cc.soundManager.playSound("SE_Enter"),o.getInstance().share("感觉生活无乐趣,这个游戏不要太刺激!谁敢说不是手残,来挑战指神!","share.png","",function(){this._onRelifeBtnClick(),GameAnalytics("addDesignEvent","Revive:Share",1)}.bind(this))},onRelifeBtnClick:function(){cc.soundManager.playSound("SE_Enter"),o.getInstance().print("点击复活按钮"),o.getInstance().getAd().vedioPlay(function(){}.bind(this),function(e){e&&(this._onRelifeBtnClick(),GameAnalytics("addDesignEvent","Revive:VedioPlay",1),o.getInstance().getAd().createVideo(function(){}.bind(this),function(){}.bind(this)))}.bind(this))},_onRelifeBtnClick:function(){cc.soundManager.load(),this._overPopup.active=!1,n.removeOpenDataTexture();var e=this.node.getChildByName("timer").getComponent(cc.Label);e.node.active=!0;var t=3;e.string=t+"",this.playerRelife(),this.schedule(function(){t--,e.string=t+"",0===t&&(e.node.active=!1,cc.superHand.gameState=cc.GameState.Gaming)}.bind(this),1,3,0)},playerRelife:function(){for(var e=0;e<this._diePoints.length;e++){for(var t=this._currentTileLayer.getTileGIDAt(this._diePoints[e]),s=void 0,n=void 0,i=0;i<this.stoneGID.length;i++)for(var a=0;a<this.stoneGID[i].length;a++)if(t==this.stoneGID[i][a]){n=a%4,s=Math.floor(a/4);break}for(var c=this._diePoints[e].y-s,o=this._diePoints[e].x-n,r=o;r<o+4;r++)for(var l=c;l<c+4;l++)r<0||l<0||l>=this.tilemap.getMapSize().height||r>=this.tilemap.getMapSize().width||this._currentTileLayer.removeTileAt(r,l)}this.player_left.emit("relife"),this.player_right.emit("relife")},onLoad:function(){o.getInstance().showShareMenu("感觉生活无乐趣,这个游戏不要太刺激!谁敢说不是手残,来挑战指神!",""),this.setMacroCulling(!0)},setMacroCulling:function(e){cc.macro.ENABLE_CULLING!==e&&(cc.macro.ENABLE_CULLING=e,cc.director.getScene()._sgNode._renderCmd.setDirtyFlag(_ccsg.Node._dirtyFlags.cullingDirty),cc.renderer.childrenOrderDirty=!0)},start:function(){if(cc.sys.platform===cc.sys.QQ_PLAY&&(null===o.getInstance().gameScene&&BK.QQ.listenGameEventEnterBackground({},function(){if(o.getInstance().print("进入后台"),cc.superHand.gameState===cc.GameState.Gaming){if(null===o.getInstance().gameScene)return;cc.superHand.gameState=cc.GameState.GamePause,o.getInstance().gameScene.pause.setLocalZOrder(10),o.getInstance().gameScene.pause.active=!0,o.getInstance().gameScene.player_left.emit("gamepause"),o.getInstance().gameScene.player_right.emit("gamepause"),o.getInstance().gameScene.player_right.parent=o.getInstance().gameScene.node}}),o.getInstance().gameScene=this),cc.soundManager.playMusic("BGM_InGame"),this.initTop(),this.initMap(),this.initPlayer(),cc.sys.platform===cc.sys.QQ_PLAY){var e=void 0,t=void 0;e=cc.superHand.mode===cc.Mode.Stage?cc.find("Canvas/top/stage/progressBar").getComponent(cc.Widget):cc.find("Canvas/top/endless/progressBar").getComponent(cc.Widget),t=cc.find("Canvas/top/pauseBtn").getComponent(cc.Widget),e.top=e.top+80,t.top=t.top+80}else if("OPPO"===o.getInstance().platform){var s=void 0,n=void 0;s=cc.superHand.mode===cc.Mode.Stage?cc.find("Canvas/top/stage/progressBar").getComponent(cc.Widget):cc.find("Canvas/top/endless/progressBar").getComponent(cc.Widget),n=cc.find("Canvas/top/pauseBtn").getComponent(cc.Widget),s.top=s.top+40,n.top=n.top+40,n.left=n.left+100,o.getInstance().platform}},update:function(e){cc.superHand.gameState==cc.GameState.Gaming&&(this.collision(),this.updateMap(e))},_updateSubDomainCanvas:function(){if(this.tex){var e=wx.getOpenDataContext().canvas;this.tex.initWithElement(e),this.tex.handleLoadedTexture(),this.openDataTexture.spriteFrame=new cc.SpriteFrame(this.tex)}}}),cc._RF.pop()},{JPlatform:"JPlatform",wxsdk:"wxsdk"}],load:[function(e,t,s){"use strict";cc._RF.push(t,"a4ab9P+zfJLMqmtXe0REyFY","load");var n=e("JPlatform"),i=e("soundManager"),a=e("state"),c=e("GameJsCfg");e("wxsdk");cc.Class({extends:cc.Component,properties:{},onLoad:function(){if("OPPO"===n.getInstance().platform){var e=opUnion.createBannerAd({containerId:"banner",posId:"25974",mediaId:"101000031"});e.onLoad(function(e){document.getElementById("ad").style.display="block",console.log("Banner广告加载成功"),n.getInstance().getAd().interstitialAd=opUnion.createInterstitialAd({posId:"25975",mediaId:"101000031"}),console.log("开始插屏广告加载"),n.getInstance().getAd().interstitialAd.onLoad(function(){n.getInstance().getAd().isInterstitialAdOK=!0,console.log("插屏广告加载成功")}),n.getInstance().getAd().interstitialAd.onError(function(e){console.log(e),console.log("插屏广告加载失败")})}),e.onError(function(e){document.getElementById("ad").style.display="none",console.log(e),console.log("Banner广告加载失败"),n.getInstance().getAd().interstitialAd=opUnion.createInterstitialAd({posId:"25975",mediaId:"101000031"}),console.log("开始插屏广告加载"),n.getInstance().getAd().interstitialAd.onLoad(function(){n.getInstance().getAd().isInterstitialAdOK=!0,console.log("插屏广告加载成功")}),n.getInstance().getAd().interstitialAd.onError(function(e){console.log(e),console.log("插屏广告加载失败")})})}cc.sys.platform===cc.sys.QQ_PLAY&&n.getInstance().getAd().createVideo(function(){n.getInstance().getAd().createBanner()}.bind(this),null,null,function(){n.getInstance().getAd().createBanner()}.bind(this)),cc.soundManager=new i,cc.soundManager.load(),cc.superHand=new a,cc.stage_config=c;var t=cc.sys.localStorage.getItem("stageScore");t?cc.superHand.stageScore=JSON.parse(t):cc.sys.localStorage.setItem("stageScore",JSON.stringify(cc.superHand.stageScore));var s=cc.sys.localStorage.getItem("endlessScore");s?cc.superHand.endlessScore=JSON.parse(s):cc.sys.localStorage.setItem("endlessScore",JSON.stringify(cc.superHand.endlessScore)),this.progressBar=this.node.getChildByName("progressBar").getComponent(cc.ProgressBar),cc.sys.platform,cc.sys.QQ_PLAY},onShowCallback:function(e){if(console.log("onShow res",e),"game"!=cc.director.getScene().name&&null!=e.shareTicket&&cc.superHand.showGroupFriendRank){cc.superHand.showGroupFriendRank=!1;var i=cc.director.getScene().getChildByName("Canvas");console.log("res.shareTicket",e.shareTicket);var t=i.getChildByTag(1111);if(null==t)cc.loader.loadRes("rank/RankingListView",cc.Prefab,function(e,t){if(e)cc.error(e.message||e);else{var s=cc.instantiate(t);s.setTag(1111),i.addChild(s);var n=s.getChildByName("title");n.active=!0,n.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(cc.loader.getRes("rank/group_friend_label.png"))}});else{var s=t.getChildByName("title");s.active=!0,s.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(cc.loader.getRes("rank/group_friend_label.png"))}wx.getOpenDataContext().postMessage({messageType:5,rankKey:"rankkey",shareTicket:e.shareTicket})}},start:function(){cc.director.preloadScene("menu");cc.loader.loadResDir("images-zh/",cc.SpriteAtlas,function(e,t){e&&console.log("err ",e)}),cc.loader.loadResDir("map/",cc.TileMap,function(e,t){e&&console.log("err ",e)}),cc.loader.loadResDir("rank/",cc.SpriteFrame,function(e,t){e&&console.log("err ",e)}),cc.loader.loadResDir("sounds/",cc.AudioClip,function(e,t,s){this.progressBar.progress=e/t,e==t&&cc.director.loadScene("menu")}.bind(this),function(e,t){e&&console.log("err ",e)})}}),cc._RF.pop()},{GameJsCfg:"GameJsCfg",JPlatform:"JPlatform",soundManager:"soundManager",state:"state",wxsdk:"wxsdk"}],menu:[function(e,t,s){"use strict";cc._RF.push(t,"7b9e3frs1hBo7/tJeboXSN0","menu");e("wxsdk");var n=e("JPlatform");cc.Class({extends:cc.Component,properties:{friendRank:cc.Node,groupRank:cc.Node},onLoad:function(){if(this.menu=cc.find("Canvas/menu"),this.help=cc.find("Canvas/help"),cc.superHand.gameState=cc.GameState.Menu,this.initGroupFriendRank(),"gb4399"===n.getInstance().platform&&(this.friendRank.active=!1,this.groupRank.active=!1),"xiaomi"===n.getInstance().platform&&(this.friendRank.active=!1,this.groupRank.active=!1),"OPPO"===n.getInstance().platform){this.friendRank.active=!1,this.groupRank.active=!1;var e=cc.find("Canvas/menu/helpBtn").getComponent(cc.Widget),t=cc.find("Canvas/menu/soundBtn").getComponent(cc.Widget);e.left=e.left+100,t.left=t.left+100}},onHelpBtnClick:function(){cc.soundManager.playSound("SE_Enter"),this.help.active=!0},destroyHelpView:function(e,t){this.help.active=!1},onStartBtnClick:function(){cc.soundManager.playSound("SE_Enter"),cc.superHand.transitionTo("modeSelect",.8)},onGroupRankBtnClick:function(){cc.soundManager.playSound("SE_Enter"),cc.sys.platform===cc.sys.QQ_PLAY&&(n.getInstance().rankType=1,cc.director.loadScene("rank"))},onShareBtnClick:function(){cc.soundManager.playSound("SE_Enter"),cc.sys.platform,cc.sys.QQ_PLAY,n.getInstance().share("感觉生活无乐趣,这个游戏不要太刺激!谁敢说不是手残,来挑战指神!","")},onFriendBtnClick:function(){cc.soundManager.playSound("SE_Enter"),n.getInstance().rankType=0,cc.director.loadScene("rank")},initGroupFriendRank:function(){}}),cc._RF.pop()},{JPlatform:"JPlatform",wxsdk:"wxsdk"}],modeSelect:[function(e,t,s){"use strict";cc._RF.push(t,"437c7j5D1hHXZMoxRYNYWrG","modeSelect"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.superHand.gameState=cc.GameState.ModeSelect,cc.soundManager.playMusic("BGM_Title")},start:function(){},onModeSelectBtnClick:function(e,t){cc.soundManager.playSound("SE_Enter"),"stage"===t?(cc.superHand.mode=cc.Mode.Stage,cc.superHand.transitionTo("difficultySelect",.8)):"endless"==t&&(cc.superHand.mode=cc.Mode.Endless,cc.superHand.transitionTo("game",.8,function(e,t){var s=t.getChildByName("Canvas").getChildByName("help");s.setLocalZOrder(10),s.active=!0}))},onCancelBtnClick:function(e,t){cc.soundManager.playSound("SE_Enter"),cc.superHand.transitionTo("menu",.8)}}),cc._RF.pop()},{}],over:[function(e,t,s){"use strict";cc._RF.push(t,"7810c1BSfFMG6YpW4JJ/SzC","over");var n=e("JPlatform");e("wxsdk");cc.Class({extends:cc.Component,properties:{_score:null,_best:null},onSelectBtnClick:function(){cc.soundManager.playSound("SE_Enter"),n.getInstance().getAd().hideBanner(),cc.superHand.transitionTo("modeSelect",.8)},onMenuBtnClick:function(){cc.soundManager.playSound("SE_Enter"),n.getInstance().getAd().hideBanner(),cc.superHand.transitionTo("menu",.8)},onRetryBtnClick:function(){cc.soundManager.playSound("SE_Enter"),n.getInstance().getAd().hideBanner(),cc.superHand.transitionTo("game",.8,function(e,t){setTimeout(function(){cc.superHand.gameState=cc.GameState.Gaming},100)})},onLoad:function(){cc.soundManager.playMusic("BGM_Result");var e=cc.superHand.difficulty===cc.Difficulty.Easy?"easy":cc.superHand.difficulty===cc.Difficulty.Normal?"normal":"hard";if(console.log("over state ",cc.superHand),cc.superHand.mode===cc.Mode.Stage){var t=this.node.getChildByName("ending_stage");t.active=!0,this._score=t.getChildByName("score").getComponent(cc.Label),this._score.string=cc.superHand.stageScore[e].currentScore+"%",this._best=t.getChildByName("best").getComponent(cc.Label),this._best.string=cc.superHand.stageScore[e].bestScore+"%",cc.superHand.stageScore[e].bestScore&&cc.superHand.stageScore[e].currentScore>=cc.superHand.stageScore[e].bestScore&&(this.node.getChildByName("particle").active=!0)}else if(cc.superHand.mode===cc.Mode.Endless){var s=this.node.getChildByName("ending_endless");s.active=!0,this._score=s.getChildByName("score").getComponent(cc.Label),this._score.string=cc.superHand.endlessScore.currentScore+"m",this._best=s.getChildByName("best").getComponent(cc.Label),this._best.string=cc.superHand.endlessScore.bestScore+"m";var n=s.getChildByName("reward");0!=cc.superHand.endlessScore.bestScore&&cc.superHand.endlessScore.currentScore>=cc.superHand.endlessScore.bestScore&&(n.active=!0,this.node.getChildByName("particle").active=!0)}},onShareBtnClick:function(){cc.soundManager.playSound("SE_Enter"),n.getInstance().share("感觉生活无乐趣,这个游戏不要太刺激!谁敢说不是手残,来挑战指神!","share.png","",function(){}.bind(this))},start:function(){n.getInstance().getAd().isBannerAdOK&&n.getInstance().getAd().showBanner()}}),cc._RF.pop()},{JPlatform:"JPlatform",wxsdk:"wxsdk"}],player:[function(e,t,s){"use strict";cc._RF.push(t,"781dduK9zJEnJ0kQoGeB3+/","player"),cc.PlayerState=cc.Enum({Normal:0,Push:1,HalfDie:2,Die:3,Relife:4}),cc.PlayerSide={Left:"L",Right:"R"};e("JPlatform"),cc.FingerPos,cc.FingerState;cc.Class({extends:cc.Component,properties:{_playerState:cc.PlayerState.Normal,playerSide:cc.PlayerSide.Left},onLoad:function(){this.ball=this.node.getChildByName("ball");var e=this.ball.getPosition();if(this.playerSide==cc.PlayerSide.Left){var t=cc.p(-240,this.ball.getPositionY());this.ballToLeft=cc.moveTo(.035,t),this.ballToRight=cc.moveTo(.035,e)}else if(this.playerSide==cc.PlayerSide.Right){var s=cc.p(240,this.ball.getPositionY());this.ballToLeft=cc.moveTo(.035,e),this.ballToRight=cc.moveTo(.035,s)}this.finger=this.node.getChildByName("finger"),this.finger.on("touchstart",function(e){cc.soundManager.playSound("SE_Turn"),this._playerState!=cc.PlayerState.Die&&this._playerState!=cc.PlayerState.HalfDie&&this._setPlayerState(cc.PlayerState.Push)},this),this.finger.on("touchcancel",function(e){this._playerState!=cc.PlayerState.Die&&this._playerState!=cc.PlayerState.HalfDie&&this._setPlayerState(cc.PlayerState.Normal)},this),this.finger.on("touchend",function(e){this._playerState!=cc.PlayerState.Die&&this._playerState!=cc.PlayerState.HalfDie&&this._setPlayerState(cc.PlayerState.Normal)},this),this.node.on("gameover",function(e){cc.soundManager.stopMusic("BGM_InGame"),cc.soundManager.playSound("SE_Break"),"Die"==e.detail&&this._setPlayerState(cc.PlayerState.Die),"HalfDie"==e.detail&&this._setPlayerState(cc.PlayerState.HalfDie)},this),this.node.on("gamepause",function(e){cc.sys.platform===cc.sys.QQ_PLAY?cc.soundManager.stopMusic("BGM_InGame"):cc.soundManager.pauseMusic("BGM_InGame"),this.ball.getComponent(cc.Animation).pause(),this.ball.pauseAllActions()},this),this.node.on("gameresume",function(e){cc.sys.platform===cc.sys.QQ_PLAY?cc.soundManager.playMusic("BGM_InGame"):cc.soundManager.resumeMusic("BGM_InGame"),this.ball.getComponent(cc.Animation).resume(),this.ball.resumeAllActions()},this),this.node.on("relife",function(e){this._setPlayerState(cc.PlayerState.Relife)},this),this.normal_sprite=cc.loader.getRes("images-zh/main_gameimage.plist",cc.SpriteAtlas).getSpriteFrame("main_btn_"+this.playerSide+"1"),this.push_sprite=cc.loader.getRes("images-zh/main_gameimage.plist",cc.SpriteAtlas).getSpriteFrame("main_btn_"+this.playerSide+"2")},getPointsOfBall:function(){var e=this.ball.getBoundingBoxToWorld();return{left:cc.p(e.xMin+20,e.yMin+20),right:cc.p(e.xMax-20,e.yMax-20),top:cc.p(e.xMin+20,e.yMax-20),down:cc.p(e.xMax-20,e.yMin+20)}},_setPlayerState:function(e){if(this._playerState!=e){if(e==cc.PlayerState.Normal)this.finger.getComponent(cc.Sprite).spriteFrame=this.normal_sprite,this._moveBall(this.playerSide==cc.PlayerSide.Left?"R":"L");else if(e==cc.PlayerState.Push)this.finger.getComponent(cc.Sprite).spriteFrame=this.push_sprite,this._moveBall(this.playerSide==cc.PlayerSide.Left?"L":"R");else if(e==cc.PlayerState.Die)this.ball.stopAllActions(),this.ball.getComponent(cc.Animation).play("player_die"),this.finger.getComponent(cc.Animation).play("finger_rotate");else if(e==cc.PlayerState.HalfDie){this.ball.stopAllActions(),this.ball.getComponent(cc.Animation).stop(),this.finger.getComponent(cc.Animation).play("finger_rotate").on("finished",function(){cc.soundManager.playSound("SE_GameOver")},this)}else if(e==cc.PlayerState.Relife){this.ball.getComponent(cc.Animation).play("player_roll"),this.finger.getComponent(cc.Sprite).spriteFrame=this.normal_sprite,this._moveBall(this.playerSide==cc.PlayerSide.Left?"R":"L")}this._playerState=e}},_moveBall:function(e){this.ball.stopAllActions(),this.ball.runAction("L"==e?this.ballToLeft:this.ballToRight)},start:function(){}}),cc._RF.pop()},{JPlatform:"JPlatform"}],rank:[function(e,t,s){"use strict";cc._RF.push(t,"7e890B6gJZBTqQ8YIgKhUXk","rank");e("wxsdk");var n=e("JPlatform");cc.Class({extends:cc.Component,properties:{rankingScrollView:cc.ScrollView,scrollViewContent:cc.Node,prefabRankItem:cc.Prefab,title0:cc.Node,title1:cc.Node,loadingLabel:cc.Node,rankList:cc.Node,nextFriend:cc.Node,_current_page:0,_total_page:0,_page_user_num:5,_user_data:[]},onLoad:function(){},start:function(){this.removeChild(),this.loadingLabel.active=!1,this.fetchFriendData()},onNextPageClick:function(){cc.soundManager.playSound("SE_Enter"),this.showNextPageUser()},onLastPageClick:function(){cc.soundManager.playSound("SE_Enter"),this.showLastPageUser()},onBackBtnClick:function(e,t){cc.soundManager.playSound("SE_Enter"),cc.director.loadScene("menu"),this.removeChild(),this.loadingLabel.active=!1,this.node.destroy()},update:function(){},showNextFriend:function(t,o){var s=this;this.nextFriend.active=!0;var r=this;wx.getUserInfo({openIdList:["selfOpenId"],success:function(e){s.loadingLabel.active=!1,console.log("success",e.data," score ",o);e.data[0];wx.getFriendCloudStorage({keyList:[t],success:function(e){var t=e.data;t.sort(function(e,t){return t.KVDataList[0].value=t.KVDataList[0].value||0,e.KVDataList[0].value=e.KVDataList[0].value||0,-(t.KVDataList[0].value-e.KVDataList[0].value)}),console.log("wx.getFriendCloudStorage success",e);for(var s=!1,n=0;n<t.length;n++){var i=parseInt(0!=t[n].KVDataList.length?t[n].KVDataList[0].value:0);if(o<i){s=!0,r.nextFriend.getChildByName("avatar").active=!0,r.nextFriend.getChildByName("frame").active=!0,r._createImage(r.nextFriend.getChildByName("avatar").getComponent(cc.Sprite),t[n].avatarUrl);var a=r.nextFriend.getChildByName("record").getComponent(cc.Label);a.string=i+"米",a.node.x=188;break}}if(!s){r.nextFriend.getChildByName("avatar").active=!1,r.nextFriend.getChildByName("frame").active=!1;var c=r.nextFriend.getChildByName("record").getComponent(cc.Label);c.string="无",c.node.x=122}}})}})},_createImage:function(s,e){cc.loader.load({url:e,type:"jpg"},function(e,t){s.spriteFrame=new cc.SpriteFrame(t)})},showNextPageUser:function(){if(this._current_page++,this._current_page>=this._total_page)this._current_page=this._total_page-1;else{var e=this._current_page*this._page_user_num,t=e+this._page_user_num;this._show_user_data(this._user_data,e,t)}},showLastPageUser:function(){if(this._current_page--,this._current_page<0)this._current_page=0;else{var e=this._current_page*this._page_user_num,t=e+this._page_user_num;this._show_user_data(this._user_data,e,t)}},removeChild:function(){this.node.removeChildByTag(1e3),this.rankingScrollView.node.active=!1,this.scrollViewContent.removeAllChildren(),this.loadingLabel.string="玩命加载中...",this.loadingLabel.active=!0,this.nextFriend.active=!1},fetchFriendData:function(){if(this.removeChild(),0===n.getInstance().rankType?(this.title0.active=!0,this.title1.active=!1,GameAnalytics("addDesignEvent","Rank:Friend",1)):1===n.getInstance().rankType&&(this.title0.active=!1,this.title1.active=!0,GameAnalytics("addDesignEvent","Rank:Group",1)),this.rankingScrollView.node.active=!0,cc.sys.platform===cc.sys.QQ_PLAY){var e=n.getInstance().rankType;BK.QQ.getRankListWithoutRoom("score",1,e,function(e,t,s){if(0===e){if(null!=this&&null!=this.loadingLabel&&(this.loadingLabel.active=!1,s)){var n=void 0;n=1<s.data.ranking_list.length?s.data.ranking_list.sort(function(e,t){return void 0===e.score||null===e.score?1:void 0===t.score||null===t.score?-1:e.score<=t.score?1:-1}):s.data.ranking_list,this._user_data=n,this._total_page=Math.ceil(this._user_data.length/this._page_user_num);for(var i=0;i<this._user_data.length;i++)if(1==this._user_data[i].selfFlag){var a=cc.instantiate(this.prefabRankItem);a.getComponent("RankItem").init(i,this._user_data[i],!0),a.y=-296,this.rankingScrollView.node.addChild(a,1,1e3);break}this._show_user_data(this._user_data,0,this._page_user_num)}}else null!=this&&null!=this.loadingLabel&&(this.loadingLabel.active=!1)}.bind(this))}else{this.loadingLabel.active=!1,this._user_data=[{nick:"他",score:50,selfFlag:0,url:"http://thirdqq.qlogo.cn/g?b=sdk&k=KbBWC35fPUEDNM36RlqyGA&s=100&t=96"},{nick:"他",score:49,selfFlag:0,url:"http://thirdqq.qlogo.cn/g?b=sdk&k=KbBWC35fPUEDNM36RlqyGA&s=100&t=96"},{nick:"他",score:48,selfFlag:0,url:"http://thirdqq.qlogo.cn/g?b=sdk&k=KbBWC35fPUEDNM36RlqyGA&s=100&t=96"},{nick:"他",score:47,selfFlag:0,url:"http://thirdqq.qlogo.cn/g?b=sdk&k=KbBWC35fPUEDNM36RlqyGA&s=100&t=96"},{nick:"他",score:14,selfFlag:0,url:"http://thirdqq.qlogo.cn/g?b=sdk&k=KbBWC35fPUEDNM36RlqyGA&s=100&t=96"},{nick:"他",score:13,selfFlag:0,url:"http://thirdqq.qlogo.cn/g?b=sdk&k=KbBWC35fPUEDNM36RlqyGA&s=100&t=96"},{nick:"他",score:12,selfFlag:1,url:"http://thirdqq.qlogo.cn/g?b=sdk&k=KbBWC35fPUEDNM36RlqyGA&s=100&t=96"},{nick:"他",score:11,selfFlag:0,url:"http://thirdqq.qlogo.cn/g?b=sdk&k=KbBWC35fPUEDNM36RlqyGA&s=100&t=96"},{nick:"他",score:10,selfFlag:0,url:"http://thirdqq.qlogo.cn/g?b=sdk&k=KbBWC35fPUEDNM36RlqyGA&s=100&t=96"},{nick:"他",score:9,selfFlag:0,url:"http://thirdqq.qlogo.cn/g?b=sdk&k=KbBWC35fPUEDNM36RlqyGA&s=100&t=96"},{nick:"他",score:8,selfFlag:0,url:"http://thirdqq.qlogo.cn/g?b=sdk&k=KbBWC35fPUEDNM36RlqyGA&s=100&t=96"},{nick:"他",score:7,selfFlag:0,url:"http://thirdqq.qlogo.cn/g?b=sdk&k=KbBWC35fPUEDNM36RlqyGA&s=100&t=96"},{nick:"他",score:6,selfFlag:0,url:"http://thirdqq.qlogo.cn/g?b=sdk&k=KbBWC35fPUEDNM36RlqyGA&s=100&t=96"},{nick:"他",score:5,selfFlag:0,url:"http://thirdqq.qlogo.cn/g?b=sdk&k=KbBWC35fPUEDNM36RlqyGA&s=100&t=96"},{nick:"他",score:3,selfFlag:0,url:"http://thirdqq.qlogo.cn/g?b=sdk&k=KbBWC35fPUEDNM36RlqyGA&s=100&t=96"},{nick:"他",score:1,selfFlag:0,url:"http://thirdqq.qlogo.cn/g?b=sdk&k=KbBWC35fPUEDNM36RlqyGA&s=100&t=96"}],this._total_page=Math.ceil(this._user_data.length/this._page_user_num);for(var t=0;t<this._user_data.length;t++)if(1==this._user_data[t].selfFlag){var s=cc.instantiate(this.prefabRankItem);s.getComponent("RankItem").init(t,this._user_data[t],!0),s.y=-296,this.rankingScrollView.node.addChild(s,1,1e3);break}this._show_user_data(this._user_data,0,this._page_user_num)}},_show_user_data:function(e,t,s){if(!(t>=e.length||s<=t)){this.scrollViewContent.removeAllChildren();for(var n=t;n<s;n++){var i=e[n];if(i){var a=cc.instantiate(this.prefabRankItem);a.getComponent("RankItem").init(n,i),this.scrollViewContent.addChild(a)}}}},fetchGroupFriendData:function(t,s){var a=this;this.removeChild(),this.rankingScrollView.node.active=!0,wx.getUserInfo({openIdList:["selfOpenId"],success:function(e){console.log("success",e.data);var i=e.data[0];wx.getGroupCloudStorage({shareTicket:s,keyList:[t],success:function(e){console.log("wx.getGroupCloudStorage success",e),a.loadingLabel.active=!1;var t=e.data;t.sort(function(e,t){return t.KVDataList[0].value=t.KVDataList[0].value||0,e.KVDataList[0].value=e.KVDataList[0].value||0,t.KVDataList[0].value-e.KVDataList[0].value}),a._user_data=t,a._total_page=Math.ceil(a._user_data.length/a._page_user_num);for(var s=0;s<t.length;s++)if(t[s].avatarUrl==i.avatarUrl){var n=cc.instantiate(a.prefabRankItem);n.getComponent("RankItem").init(s,t[s],!0),n.y=-296,a.node.addChild(n,1,1e3);break}a._show_user_data(a._user_data,0,a._page_user_num)}})}})}}),cc._RF.pop()},{JPlatform:"JPlatform",wxsdk:"wxsdk"}],soundBtn:[function(e,t,s){"use strict";cc._RF.push(t,"8d55fD6MulBF6yZVo+C+HT+","soundBtn"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.setSoundBtnState(cc.soundManager.sound)},onSoundBtnClick:function(){cc.soundManager.reverseMusic(),cc.soundManager.save(),this.setSoundBtnState(cc.soundManager.sound),cc.soundManager.playSound("SE_Enter")},setSoundBtnState:function(e){e?(cc.soundManager.playMusic("BGM_Title"),this.node.getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("images-zh/title_gameimage.plist",cc.SpriteAtlas).getSpriteFrame("title_icon_speaker_on")):(cc.soundManager.stopMusic("BGM_Title"),this.node.getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("images-zh/title_gameimage.plist",cc.SpriteAtlas).getSpriteFrame("title_icon_speaker_off"))},start:function(){}}),cc._RF.pop()},{}],soundManager:[function(e,t,s){"use strict";cc._RF.push(t,"29a7578TGJLB5Odal6h1rxg","soundManager");var i="sounds/",n=e("JPlatform");cc.Class({properties:{_music:1,_sound:1,_effectContext:null,music:{get:function(){return this._music}},sound:{get:function(){return this._sound}}},ctor:function(){this._musicList={},this._currentBgm=null,this._cache={},cc.sys.platform===cc.sys.QQ_PLAY?(BK.QQ.listenGameEventEnterBackground({},function(){cc.soundManager.save(),n.getInstance().print("进入后台")}.bind(this)),BK.QQ.listenGameEventEnterForeground({},function(){if(cc.soundManager.load(),this._music)switch(n.getInstance().print("回到前台"),cc.superHand.gameState){case cc.GameState.Menu:case cc.GameState.ModeSelect:case cc.GameState.DifficultySelect:cc.soundManager.playMusic("BGM_Title");break;case cc.GameState.HelpView:case cc.GameState.Gaming:case cc.GameState.GamePause:break;case cc.GameState.Over:cc.soundManager.playMusic("BGM_Result")}}.bind(this))):(cc.game.on(cc.game.EVENT_HIDE,function(){console.log("onHide"),this.save(),this._currentBgm&&cc.audioEngine.pause(this._currentBgm),console.log(this._music+"   "+this._sound)}.bind(this)),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("onShow"),this.load(),this._currentBgm&&this._music&&cc.audioEngine.play(this._currentBgm),console.log(this._music+"   "+this._sound)}.bind(this)))},load:function(){this._music=parseInt(cc.sys.localStorage.getItem("music")),null!==this._music&&""!==this._music||(this._music=1),this._sound=parseInt(cc.sys.localStorage.getItem("sound")),null!==this._sound&&""!==this._sound||(this._sound=1)},save:function(){cc.sys.localStorage.setItem("music",this._music),cc.sys.localStorage.setItem("sound",this._sound)},reverseMusic:function(){this._music=1==this._music?0:1,this._sound=1==this._sound?0:1},playSound:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(this._music){if(this._cache[e]||(this._cache[e]=cc.loader.getRes(i+e,cc.AudioClip)),cc.sys.platform===cc.sys.QQ_PLAY)return null===this._effectContext&&(this._effectContext=BK.createAudioContext({type:"effect"})),this._effectContext.src="GameRes://res/raw-assets/resources/sounds/"+e+".mp3",void this._effectContext.play();cc.audioEngine.play(this._cache[e],!1,t)}},playMusic:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(this._music){this._cache[e]||(this._cache[e]=cc.loader.getRes(i+e,cc.AudioClip));var n=void 0;cc.sys.platform===cc.sys.QQ_PLAY?(this._currentBgm&&this._currentBgm.destroy(),(n=BK.createAudioContext()).src="GameRes://res/raw-assets/resources/sounds/"+e+".mp3",n.volume=s,n.loop=t,n.play()):(cc.audioEngine.getState(this._currentBgm)==cc.audioEngine.AudioState.PLAYING&&cc.audioEngine.stop(this._currentBgm),n=cc.audioEngine.play(this._cache[e],t,s)),this._currentBgm=n,this._musicList[e]=n}},stopMusic:function(e){void 0!==this._musicList[e]&&(cc.sys.platform===cc.sys.QQ_PLAY?(this._currentBgm&&(this._music?this._currentBgm.pause():this._currentBgm.destroy()),this._music?this._musicList[e].pause():this._musicList[e].destroy()):(this._currentBgm&&(cc.audioEngine.stop(this._currentBgm),this._currentBgm=null),cc.audioEngine.stop(this._musicList[e])))},pauseMusic:function(e){void 0!==this._musicList[e]&&cc.audioEngine.pause(this._musicList[e])},resumeMusic:function(e){void 0!==this._musicList[e]?cc.audioEngine.resume(this._musicList[e]):this.playMusic(e)}}),cc._RF.pop()},{JPlatform:"JPlatform"}],state:[function(e,t,s){"use strict";cc._RF.push(t,"040b4bn8SdL16/9+ti5aSLJ","state"),cc.Mode=cc.Enum({Stage:0,Endless:1}),cc.Difficulty=cc.Enum({Easy:0,Normal:1,Hard:2}),cc.GameState=cc.Enum({Menu:0,ModeSelect:1,DifficultySelect:2,HelpView:3,Gaming:4,GamePause:5,Over:6}),cc.Class({properties:{mode:cc.Mode.Stage,difficulty:cc.Difficulty.Easy,gameState:cc.GameState.Menu},ctor:function(){this.stageScore={easy:{bestScore:0,currentScore:0},normal:{bestScore:0,currentScore:0},hard:{bestScore:0,currentScore:0}},this.endlessScore={bestScore:0,currentScore:0}},transitionTo:function(e,t,s){cc.director.getScene().getChildByName("PersistRootNode").getComponent("transition").transitionTo(e,t,s)}}),cc._RF.pop()},{}],transition:[function(e,t,s){"use strict";cc._RF.push(t,"e253fdUiLBEdoOW+gl54IIr","transition");cc.Class({extends:cc.Component,properties:{},start:function(){cc.game.addPersistRootNode(this.node)},transitionTo:function(e,t,s){cc.find("Canvas");var n=this.node.getChildByName("transition");n.active=!1,n.active=!0,n.opacity=0;var i=cc.fadeIn(t/2),a=cc.fadeOut(t/2),c=cc.callFunc(function(){cc.director.loadScene(e,function(e,t){s&&s(e,t),n.runAction(a)})},this),o=cc.sequence(i,c);n.runAction(o)}});cc._RF.pop()},{}],wxsdk:[function(e,t,s){"use strict";cc._RF.push(t,"938afu4netHIp0TZIhIobg8","wxsdk");var n={PERMISSION:{userInfo:0,userLocation:1,werun:2,record:3,writePhotosAlbum:4},init:function(){0},createBannder:function(e,t,s){return this.banner=wx.createBannerAd({adUnitId:e,style:{left:0,top:s,width:t}}),this.banner.onResize(function(e){this.banner.style.top=s-e.height}.bind(this)),this.banner.onLoad(function(){console.log("banner 广告加载成功"),this.showBanner()}.bind(this)),this.banner.onError(function(e){console.log("拉取banner失败",e)}),this.banner},closeBanner:function(){this.banner&&this.banner.hide()},showBanner:function(){this.banner&&this.banner.show().catch(function(e){console.log("显示banner失败",e)})},createAd:function(e,t,s){return this.ad=wx.createRewardedVideoAd({adUnitId:e}),this.ad.onLoad(function(){console.log("激励视频 广告加载成功"),this._showVideo(t,s)}),this.ad.onError(function(e){console.log("拉取video失败",e)}),this.ad},_showVideo:function(t,s){this.ad.show().catch(function(e){console.log("显示Video失败")}),this.ad.onClose(function(e){e&&e.isEnded||void 0===e?(console.log("正常播放结束，可以下发游戏奖励"),t.apply(s)):console.log("播放中途退出，不下发游戏奖励")})},submitScore:function(e,t){},removeOpenDataTexture:function(){0},showNextFriend:function(e,t){},showMaxScore:function(e){},removeScore:function(e){},showShareMenu:function(e,t){0},sharePictureWithScore:function(e){},sharePicture:function(e,t){},downImgAndSave:function(e){},setClipboardData:function(e){0},saveImageToPhotosAlbum:function(e){},getPermission:function(e,t){}};t.exports=n,cc._RF.pop()},{}]},{},["GameJsCfg","player","soundBtn","difficultySelect","game","load","menu","modeSelect","over","rank","GameRankingList","RankItem","RankingListView","JPlatform","wxsdk","soundManager","state","transition"]);