!function(){var t,c={},a=!(!window.android||!window.android.getImei),r=!1;a&&((t=window.android).downloadByPid||(r=!0));var o={};function e(e){var o=window.location.search,n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=o.substr(o.indexOf("?")+1).match(n);return null!=i?i[2]:""}c.setWebviewOrientation=function(e){a&&android.setWebViewOrientation?android.setWebViewOrientation(e):console.warn("native call failed:setWebViewOrientation")},c.getIMEI=function(){return a?(o.imei||(o.imei=t.getImei()),{imei:o.imei}):{imei:"000000000000000"}},c.makeToast=function(e){a?t.makeToast(e.msg):alert(e.msg)},c.getAppVersion=function(){if(a){if(!o.app_ver){o.app_ver=t.callNativeApi(JSON.stringify({api:"tool",type:"tool_get_version_and_platform"}))}var e=JSON.parse(o.app_ver);return{version:e.versioncode,app:e.platform}}return{version:"0001",app:"market"}},c.dialNumber=function(e){if(a){var o={api:"jump",type:"jump_dial",id:e.number+""};t.callNativeApi(JSON.stringify(o))}else console.log("dial number:"+e.number)},c.forceLogin=function(){if(a){t.callNativeApi(JSON.stringify({type:"reLoginAccount"}))}else console.log("force login")},c.getNetworkType=function(){return a?{network:t.getNetworkType()}:{network:"wifi"}},c.getLoginInfo=function(){var e="",o="",n="";if(a){if(r){var i=t.getLoginInfo();e=(i=i.split(";"))[0],o=i[1],n=i[2]}else e=t.getToken(),o=t.getMobileName();e=decodeURIComponent(e)}return{token:e,model:o,other:n}},c.isLogin=function(){return a?{login:"true"==t.isLogin().toLowerCase()}:"127.0.0.1"==location.hostname?{login:!0}:{login:!1}},c.doStartLogin=function(){a?r?t.doStartLogin(!0):t.startLogin():console.log("call native login")},c.isInstalled=function(e){return a?e.package?{install:"true"==t.isInstalled(e.package).toLowerCase()}:(console.log("no package for isInstalled"),null):{install:!1}},c.openAppDetail=function(e){a?r?t.openActivity("oap://gc/dt?id="+e.masterid):t.openActivity("oap://mk/dt?id="+e.masterid):console.log("call native:openActivity")},c.openApp=function(e){if(a){if(!e.package)return void console.log("no package for openApp");r?t.openGame(e.package):t.openApp(e.package)}else console.log("call native:openApp")},c.openWebView=function(e){a?t.openWebView(e.title,e.url,e.type||0):window.location.assign(e.url)},c.closePage=function(){a?t.closePage():console.log("call native:closePage")};var n={},i=0,p={imei:"000000000000000",model:"",token:"",osv:"",romv:"",av:"",netid:"wifi"},l={androidVersionName:"",colorOsVersion:""},d="https://epoch.cdo.oppomobile.com",s="/soporcollect/wapevent/v1/event";p.imei=c.getIMEI().imei,p.model=c.getLoginInfo().model,p.token=c.getLoginInfo().token,p.netid=c.getNetworkType().network,l.imei=p.imei,l.model=p.model;var m="",g=e("oppoact"),u=e("oppopage"),f={event:2006,channelid:2201,systemid:1e3};function k(e,o){var n={event:f.event,tags:{name:e.action||604,imei:p.imei,model:p.model,osv:p.osv,romv:p.romv,av:p.av,ch:f.channelid,sysid:f.systemid,netid:p.netid},timestamp:Date.now()};for(var i in o)n.tags[i]=o[i];var t=encodeURIComponent(JSON.stringify(n)),a=d+s+"?data="+t+"&callback=_oppoReportLoad",c=document.createElement("script");c.src=a,c.onload=function(){document.head.removeChild(this)},document.head.appendChild(c)}var v=!(window._oppoReportLoad=function(e){console.log(e)});function _(e){k({action:602},{type:e,act_id:g,pkg:m})}function y(e){k({action:603},{type:e,act_id:g,pkg:m,token:p.token})}function w(e,o){var n=document.createElement("script");n.src=e,n.onload=function(){document.head.removeChild(this)},n.onerror=function(){o({code:999,msg:"鎺ュ彛璋冪敤澶辫触"})},document.head.appendChild(n)}function h(){return"oppo_callback_"+i++}function b(e){var o=[];for(var n in e)o.push(n+"="+encodeURIComponent(e[n]));return o.join("&")}function N(){setTimeout(function(){p.token=c.getLoginInfo().token,p.netid=c.getNetworkType().network},500)}n.checkPay=function(e){e(c.isInstalled({package:"com.nearme.atlas",masterid:10057477}).install)},n.login=function(o){if(m=o.packageName,v||(k({action:601},{type:2,page_id:u,act_id:g,pkg:m}),v=!0),c.isLogin().login){var e=h(),n={token:c.getLoginInfo().token,pkgName:o.packageName};n.header=JSON.stringify(l),n.callback=e,window[e]=function(e){200==e.code?(e.token=n.token,y(11)):1005==e.code&&(y(12),c.forceLogin(),N()),o.callback(e)},_(21),w("https://play.open.oppomobile.com/instant-game-open/userInfo/tokenCheck?"+b(n),o.callback)}else _(22),c.doStartLogin(),N()},n.pay=function(t){if(c.isLogin().login){m=t.packageName;var a=c.getLoginInfo().token,e=h(),o={token:a,pkgName:t.packageName,cpOrderId:t.orderId,price:t.price,productName:t.productName,productDesc:t.productDesc,cpCallbackUrl:t.callbackUrl,appVersion:t.appVersion,sdkVersion:"1.0"};o.header=JSON.stringify(l),o.callback=e,k({action:602},{type:31,act_id:g,pkg:m,token:p.token}),window[e]=function(e){var o,n,i;200==e.code?(y(21),o={notify_url:e.callBackUrl,product_name:t.productName,product_desc:t.productDesc,channel_id:e.channel,partner_id:e.channel,source:t.appName,package_name:t.packageName,amount:(t.price/100).toFixed(2),order_id:e.orderId,app_version:t.appVersion,app_code:t.appVersion,app_key:t.appKey,token:a,sign:e.sign},n=document.createElement("iframe"),i={notify_url:o.notify_url,product_name:o.product_name,product_desc:o.product_desc,package_name:o.package_name,app_version:o.app_version,source:o.source,amount:o.amount,channel_id:o.channel_id,currency_name:"浜烘皯甯�",exchange_ratio:"1.0",partner_id:o.partner_id,pay_type:"1",partner_order:o.order_id,app_code:o.app_code,app_key:o.app_key,token:o.token,sign:o.sign},n.style.display="none",document.body.appendChild(n),n.src="kekepay://nearme.atlas.com?"+b(i),setTimeout(function(){document.body.removeChild(n),n=null},1e3),setTimeout(function(){t.callback({code:200,msg:""})},500)):(y(22),1005==e.code&&(c.forceLogin(),N()),t.callback(e))},w("https://isdk.oppomobile.com/gamepay/h5/v1?"+b(o),t.callback)}else c.doStartLogin(),N()},n.setWebviewOrientation=c.setWebviewOrientation,window.OPPO=n}();